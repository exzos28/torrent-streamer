# –ê–Ω–∞–ª–∏–∑ –∫–æ–¥–æ–≤–æ–π –±–∞–∑—ã - –û—Ç—á–µ—Ç –æ –ø—Ä–æ–±–ª–µ–º–∞—Ö

## üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. –£—Ç–µ—á–∫–∞ –ø–∞–º—è—Ç–∏: setTimeout –Ω–µ –æ—á–∏—â–∞–µ—Ç—Å—è –≤ WebTorrentRepository
**–§–∞–π–ª:** `src/infrastructure/torrent/WebTorrentRepository.ts:84`

**–ü—Ä–æ–±–ª–µ–º–∞:**
```typescript
setTimeout(() => {
    const hasMetadata = isExtendedTorrent(torrentRef) ? torrentRef.metadata : false;
    if (!hasMetadata) {
        // ... cleanup
        reject(new Error('Metadata reception timeout'));
    }
}, config.METADATA_TIMEOUT);
```

–ï—Å–ª–∏ Promise —Ä–∞–∑—Ä–µ—à–∞–µ—Ç—Å—è –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è —Ç–∞–π–º–∞—É—Ç–∞ (—á–µ—Ä–µ–∑ `metadata` –∏–ª–∏ `error` —Å–æ–±—ã—Ç–∏—è), setTimeout –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∏ –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å:
- –ü–æ–ø—ã—Ç–∫—É –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ reject (–∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è, –Ω–æ –≤—Å–µ —Ä–∞–≤–Ω–æ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è)
- –£—Ç–µ—á–∫—É –ø–∞–º—è—Ç–∏
- Race condition

**–†–µ—à–µ–Ω–∏–µ:** –°–æ—Ö—Ä–∞–Ω—è—Ç—å `timeoutId` –∏ –æ—á–∏—â–∞—Ç—å —á–µ—Ä–µ–∑ `clearTimeout()` –ø—Ä–∏ resolve/reject.

---

### 2. –£—Ç–µ—á–∫–∞ –ø–∞–º—è—Ç–∏: Event listeners –Ω–µ —É–¥–∞–ª—è—é—Ç—Å—è
**–§–∞–π–ª:** `src/infrastructure/torrent/WebTorrentRepository.ts:67-81`

**–ü—Ä–æ–±–ª–µ–º–∞:**
```typescript
torrentRef.on('metadata', () => { ... });
torrentRef.on("error", (raw) => { ... });
```

Event listeners –æ—Å—Ç–∞—é—Ç—Å—è –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–º–∏ –∫ –æ–±—ä–µ–∫—Ç—É —Ç–æ—Ä—Ä–µ–Ω—Ç–∞ –¥–∞–∂–µ –ø–æ—Å–ª–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è Promise. –ü—Ä–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –¥–æ–±–∞–≤–ª–µ–Ω–∏—è—Ö —Ç–æ—Ä—Ä–µ–Ω—Ç–æ–≤ —ç—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ —É—Ç–µ—á–∫–µ –ø–∞–º—è—Ç–∏.

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `.once()` –≤–º–µ—Å—Ç–æ `.on()` –∏–ª–∏ —è–≤–Ω–æ —É–¥–∞–ª—è—Ç—å listeners —á–µ—Ä–µ–∑ `.off()` –ø–æ—Å–ª–µ resolve/reject.

---

### 3. Race condition –≤ WebTorrentStreamService cleanup
**–§–∞–π–ª:** `src/infrastructure/streaming/WebTorrentStreamService.ts:254-257`

**–ü—Ä–æ–±–ª–µ–º–∞:**
```typescript
req.on('close', cleanup);
req.on('aborted', cleanup);
res.on('close', cleanup);
res.on('finish', cleanup);
```

–§—É–Ω–∫—Ü–∏—è `cleanup` –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—ã–∑–≤–∞–Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ, —á—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫:
- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º –≤—ã–∑–æ–≤–∞–º `destroy()`
- –ü–æ–ø—ã—Ç–∫–∞–º –∑–∞–ø–∏—Å–∏ –≤ —É–∂–µ –∑–∞–∫—Ä—ã—Ç—ã–π stream
- Race conditions

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å —Ñ–ª–∞–≥ `isCleanedUp` –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤.

---

### 4. Non-null assertion –Ω–∞ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ null –ø–æ—Ç–æ–∫–∞—Ö
**–§–∞–π–ª:** `src/infrastructure/logging/FileLogger.ts:56,61,63,68,73,78`

**–ü—Ä–æ–±–ª–µ–º–∞:**
```typescript
this.writeToFile(this.writeStream!, 'LOG', message, ...args);
this.writeToFile(this.errorStream!, 'ERROR', message, ...args);
```

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `!` (non-null assertion) –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫—É TypeScript. –ï—Å–ª–∏ –ø–æ—Ç–æ–∫–∏ –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ –æ—à–∏–±–∫–µ —Å–æ–∑–¥–∞–Ω–∏—è), —ç—Ç–æ –ø—Ä–∏–≤–µ–¥–µ—Ç –∫ runtime –æ—à–∏–±–∫–µ.

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—è—Ç—å –ø–æ—Ç–æ–∫–∏ –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å optional chaining.

---

### 5. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –ø—Ä–∏ –∑–∞–ø–∏—Å–∏ –≤ —Ñ–∞–π–ª
**–§–∞–π–ª:** `src/infrastructure/logging/FileLogger.ts:47-52`

**–ü—Ä–æ–±–ª–µ–º–∞:**
```typescript
private writeToFile(stream: fs.WriteStream, ...): void {
    if (stream && !stream.destroyed) {
        const formatted = this.formatMessage(...);
        stream.write(formatted); // –ù–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
    }
}
```

–ï—Å–ª–∏ –∑–∞–ø–∏—Å—å –≤ —Ñ–∞–π–ª –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è –æ—à–∏–±–∫–æ–π (–¥–∏—Å–∫ –∑–∞–ø–æ–ª–Ω–µ–Ω, –Ω–µ—Ç –ø—Ä–∞–≤ –∏ —Ç.–¥.), –æ—à–∏–±–∫–∞ –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –∏ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –ø–∞–¥–µ–Ω–∏—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ —á–µ—Ä–µ–∑ `.on('error')` –Ω–∞ stream –∏–ª–∏ try-catch.

---

## üü° –ê–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω—ã TypeScript

### 6. –ò–∑–±—ã—Ç–æ—á–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `as any` –≤ —Ç–µ—Å—Ç–∞—Ö
**–§–∞–π–ª—ã:** 
- `src/infrastructure/torrent/WebTorrentRepository.test.ts` (10 –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π)
- `src/infrastructure/torrent/pieceRanges.test.ts` (7 –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π)

**–ü—Ä–æ–±–ª–µ–º–∞:**
```typescript
const torrent = new EventEmitter() as any;
(repository as any).activeTorrents.set('magnet:test', mockTorrent);
expect(getRanges(null as any)).toEqual([]);
```

–•–æ—Ç—è `as any` –¥–æ–ø—É—Å—Ç–∏–º –≤ —Ç–µ—Å—Ç–∞—Ö, —ç—Ç–æ —Å–∫—Ä—ã–≤–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã —Ç–∏–ø–∏–∑–∞—Ü–∏–∏ –∏ —É—Å–ª–æ–∂–Ω—è–µ—Ç —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥.

**–†–µ—à–µ–Ω–∏–µ:** 
- –°–æ–∑–¥–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ç–∏–ø—ã –¥–ª—è –º–æ–∫–æ–≤
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `Partial<T>` –∏–ª–∏ —É—Ç–∏–ª–∏—Ç–∞—Ä–Ω—ã–µ —Ç–∏–ø—ã
- –î–ª—è —Ç–µ—Å—Ç–æ–≤ null/undefined –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `unknown` –≤–º–µ—Å—Ç–æ `any`

---

### 7. Type assertion –≤–º–µ—Å—Ç–æ type guard
**–§–∞–π–ª:** `src/infrastructure/streaming/WebTorrentStreamService.ts:247`

**–ü—Ä–æ–±–ª–µ–º–∞:**
```typescript
const streamWithDestroy = stream as NodeJS.ReadableStream & { destroyed?: boolean; destroy?: () => void };
```

Type assertion –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–∏–ø –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è, —Ç–æ–ª—å–∫–æ –≥–æ–≤–æ—Ä–∏—Ç TypeScript "–¥–æ–≤–µ—Ä—å—Å—è –º–Ω–µ".

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å type guard –∏–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫—É –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º.

---

### 8. –î–æ—Å—Ç—É–ø –∫ –ø—Ä–∏–≤–∞—Ç–Ω–æ–º—É —Å–≤–æ–π—Å—Ç–≤—É —á–µ—Ä–µ–∑ bracket notation
**–§–∞–π–ª:** `src/utils/memory-limited-store.ts:225`

**–ü—Ä–æ–±–ª–µ–º–∞:**
```typescript
for (const [storeId, chunks] of this.tracker['chunks'].entries()) {
```

–î–æ—Å—Ç—É–ø –∫ –ø—Ä–∏–≤–∞—Ç–Ω–æ–º—É —Å–≤–æ–π—Å—Ç–≤—É —á–µ—Ä–µ–∑ `['chunks']` –æ–±—Ö–æ–¥–∏—Ç –∏–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏—é –∏ –º–æ–∂–µ—Ç —Å–ª–æ–º–∞—Ç—å—Å—è –ø—Ä–∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–µ.

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –ø—É–±–ª–∏—á–Ω—ã–π –º–µ—Ç–æ–¥ `getChunks()` –≤ `GlobalMemoryTracker` –∏–ª–∏ —Å–¥–µ–ª–∞—Ç—å —Å–≤–æ–π—Å—Ç–≤–æ protected.

---

### 9. Non-null assertion –≤ memory-limited-store
**–§–∞–π–ª:** `src/utils/memory-limited-store.ts:41,110`

**–ü—Ä–æ–±–ª–µ–º–∞:**
```typescript
const storeChunks = this.chunks.get(storeId)!;
const index = storeChunks.findIndex((c) => c.index === oldestChunk!.chunk.index);
```

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `!` –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ runtime –æ—à–∏–±–∫–µ, –µ—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ null/undefined.

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å optional chaining —Å fallback.

---

## üü† –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –±–∞–≥–∏

### 10. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ destroyed streams –ø–µ—Ä–µ–¥ –∑–∞–ø–∏—Å—å—é
**–§–∞–π–ª:** `src/infrastructure/logging/FileLogger.ts:48`

**–ü—Ä–æ–±–ª–µ–º–∞:**
–ü—Ä–æ–≤–µ—Ä–∫–∞ `!stream.destroyed` –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–π - stream –º–æ–∂–µ—Ç –±—ã—Ç—å –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –∑–∞–∫—Ä—ã—Ç–∏—è.

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –Ω–∞ `stream.writable` –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å try-catch.

---

### 11. –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ cleanup handlers –±–µ–∑ –∑–∞—â–∏—Ç—ã –æ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤
**–§–∞–π–ª:** `src/infrastructure/streaming/WebTorrentStreamService.ts:245-257`

**–ü—Ä–æ–±–ª–µ–º–∞:**
–§—É–Ω–∫—Ü–∏—è `cleanup` –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—ã–∑–≤–∞–Ω–∞ –∏–∑ 4 —Ä–∞–∑–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ, —á—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –ø—Ä–æ–±–ª–µ–º–∞–º.

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å —Ñ–ª–∞–≥ `let isCleanedUp = false` –∏ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –µ–≥–æ –≤ –Ω–∞—á–∞–ª–µ —Ñ—É–Ω–∫—Ü–∏–∏.

---

### 12. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ—á–∏—Å—Ç–∫–∏ timeout –ø—Ä–∏ destroy
**–§–∞–π–ª:** `src/infrastructure/torrent/WebTorrentRepository.ts:163-175`

**–ü—Ä–æ–±–ª–µ–º–∞:**
–ü—Ä–∏ –≤—ã–∑–æ–≤–µ `destroy()` –∞–∫—Ç–∏–≤–Ω—ã–µ —Ç–∞–π–º–∞—É—Ç—ã –Ω–µ –æ—á–∏—â–∞—é—Ç—Å—è, —á—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –ø–æ–ø—ã—Ç–∫–∞–º –¥–æ—Å—Ç—É–ø–∞ –∫ —É–∂–µ —É–Ω–∏—á—Ç–æ–∂–µ–Ω–Ω—ã–º –æ–±—ä–µ–∫—Ç–∞–º.

**–†–µ—à–µ–Ω–∏–µ:** –°–æ—Ö—Ä–∞–Ω—è—Ç—å –≤—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ timeout IDs –∏ –æ—á–∏—â–∞—Ç—å –∏—Ö –ø—Ä–∏ destroy.

---

### 13. –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è —É—Ç–µ—á–∫–∞ –ø–∞–º—è—Ç–∏ –≤ TorrentWrapper
**–§–∞–π–ª:** `src/infrastructure/torrent/TorrentWrapper.ts:55-69`

**–ü—Ä–æ–±–ª–µ–º–∞:**
–ï—Å–ª–∏ –æ–±—ä–µ–∫—Ç —Ç–æ—Ä—Ä–µ–Ω—Ç–∞ —É–Ω–∏—á—Ç–æ–∂–∞–µ—Ç—Å—è –¥–æ –≤—ã–∑–æ–≤–∞ `restore()`, –º–æ–≥—É—Ç –æ—Å—Ç–∞—Ç—å—Å—è –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã.

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –Ω–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –º–µ—Ç–æ–¥–æ–≤ –ø–µ—Ä–µ–¥ restore –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å WeakMap.

---

### 14. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
**–§–∞–π–ª—ã:**
- `src/infrastructure/torrent/WebTorrentRepository.ts:29`
- `src/infrastructure/logging/FileLogger.ts:22`

**–ü—Ä–æ–±–ª–µ–º–∞:**
```typescript
if (!fs.existsSync(torrentsDir)) {
    fs.mkdirSync(torrentsDir, { recursive: true });
}
```

–ï—Å–ª–∏ —Å–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è –æ—à–∏–±–∫–æ–π (–Ω–µ—Ç –ø—Ä–∞–≤, –¥–∏—Å–∫ –∑–∞–ø–æ–ª–Ω–µ–Ω), –æ—à–∏–±–∫–∞ –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è.

**–†–µ—à–µ–Ω–∏–µ:** –û–±–µ—Ä–Ω—É—Ç—å –≤ try-catch –∏ –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫—É.

---

## üìã –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

### –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –±–∞–≥–∏) ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û
1. ‚úÖ **–£—Ç–µ—á–∫–∞ –ø–∞–º—è—Ç–∏: setTimeout –≤ WebTorrentRepository** - –ò–°–ü–†–ê–í–õ–ï–ù–û: –¥–æ–±–∞–≤–ª–µ–Ω–∞ –æ—á–∏—Å—Ç–∫–∞ —á–µ—Ä–µ–∑ clearTimeout()
2. ‚úÖ **Event listeners –Ω–µ —É–¥–∞–ª—è—é—Ç—Å—è** - –ò–°–ü–†–ê–í–õ–ï–ù–û: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è .once() –∏ —è–≤–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ .off()
3. ‚úÖ **Non-null assertions –≤ FileLogger** - –ò–°–ü–†–ê–í–õ–ï–ù–û: –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ null –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ writable
4. ‚úÖ **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –ø—Ä–∏ –∑–∞–ø–∏—Å–∏ –≤ —Ñ–∞–π–ª** - –ò–°–ü–†–ê–í–õ–ï–ù–û: –¥–æ–±–∞–≤–ª–µ–Ω try-catch –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ stream

### –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (–ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –±–∞–≥–∏) ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û
5. ‚úÖ **Race condition –≤ cleanup handlers** - –ò–°–ü–†–ê–í–õ–ï–ù–û: –¥–æ–±–∞–≤–ª–µ–Ω —Ñ–ª–∞–≥ isCleanedUp –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤
6. ‚úÖ **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ—á–∏—Å—Ç–∫–∏ timeout –ø—Ä–∏ destroy** - –ò–°–ü–†–ê–í–õ–ï–ù–û: —Ç–∞–π–º–∞—É—Ç—ã –æ—á–∏—â–∞—é—Ç—Å—è –ø—Ä–∏ resolve/reject Promise
7. ‚úÖ **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π** - –ò–°–ü–†–ê–í–õ–ï–ù–û: –¥–æ–±–∞–≤–ª–µ–Ω try-catch —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º –æ—à–∏–±–æ–∫
8. ‚úÖ **Type assertion –≤–º–µ—Å—Ç–æ type guard** - –ò–°–ü–†–ê–í–õ–ï–ù–û: —É–ª—É—á—à–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤ –≤ cleanup handlers

### –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (—É–ª—É—á—à–µ–Ω–∏—è –∫–æ–¥–∞)
9. ‚úÖ **–ò–∑–±—ã—Ç–æ—á–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `as any` –≤ —Ç–µ—Å—Ç–∞—Ö** - —É—Ö—É–¥—à–∞–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å
10. ‚úÖ **–î–æ—Å—Ç—É–ø –∫ –ø—Ä–∏–≤–∞—Ç–Ω–æ–º—É —Å–≤–æ–π—Å—Ç–≤—É —á–µ—Ä–µ–∑ bracket notation** - –Ω–∞—Ä—É—à–∞–µ—Ç –∏–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏—é
11. ‚úÖ **Non-null assertions –≤ memory-limited-store** - –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

- **–í—Å–µ–≥–æ –Ω–∞–π–¥–µ–Ω–æ –ø—Ä–æ–±–ª–µ–º:** 14
- **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö:** 5 ‚úÖ **–í–°–ï –ò–°–ü–†–ê–í–õ–ï–ù–´**
- **–ê–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ TypeScript:** 4 (—á–∞—Å—Ç–∏—á–Ω–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ)
- **–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –±–∞–≥–æ–≤:** 5 ‚úÖ **–í–°–ï –ò–°–ü–†–ê–í–õ–ï–ù–´**
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π `as any`:** 17 (–≤ –æ—Å–Ω–æ–≤–Ω–æ–º –≤ —Ç–µ—Å—Ç–∞—Ö - –¥–æ–ø—É—Å—Ç–∏–º–æ)
- **Non-null assertions (`!`):** 8 (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã)
- **Type assertions (`as`):** 1 (—É–ª—É—á—à–µ–Ω–æ)

## ‚úÖ –°—Ç–∞—Ç—É—Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º:** 8/8
- ‚úÖ –£—Ç–µ—á–∫–∏ –ø–∞–º—è—Ç–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã
- ‚úÖ Race conditions –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –¥–æ–±–∞–≤–ª–µ–Ω–∞
- ‚úÖ Type safety —É–ª—É—á—à–µ–Ω–∞

**–û—Å—Ç–∞–ª–æ—Å—å (–Ω–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç):**
- –£–ª—É—á—à–µ–Ω–∏–µ —Ç–∏–ø–∏–∑–∞—Ü–∏–∏ –≤ —Ç–µ—Å—Ç–∞—Ö (–Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ)
- –£–ª—É—á—à–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ –∫ –ø—Ä–∏–≤–∞—Ç–Ω—ã–º —Å–≤–æ–π—Å—Ç–≤–∞–º (–Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ)

---

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–î–æ–±–∞–≤–∏—Ç—å ESLint –ø—Ä–∞–≤–∏–ª–∞:**
   - `@typescript-eslint/no-non-null-assertion`
   - `@typescript-eslint/no-explicit-any`
   - `@typescript-eslint/prefer-type-guards`

2. **–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ CI/CD:**
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —É—Ç–µ—á–∫–∏ –ø–∞–º—è—Ç–∏
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –Ω–µ–∑–∞–∫—Ä—ã—Ç—ã–µ —Ä–µ—Å—É—Ä—Å—ã

3. **–£–ª—É—á—à–∏—Ç—å —Ç–µ—Å—Ç—ã:**
   - –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –Ω–∞ —É—Ç–µ—á–∫–∏ –ø–∞–º—è—Ç–∏
   - –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –Ω–∞ cleanup —Ä–µ—Å—É—Ä—Å–æ–≤
   - –£–ª—É—á—à–∏—Ç—å —Ç–∏–ø–∏–∑–∞—Ü–∏—é –º–æ–∫–æ–≤
